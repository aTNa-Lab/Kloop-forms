(this["webpackJsonpkloop-forms"]=this["webpackJsonpkloop-forms"]||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(9),o=n.n(l),s=(n(82),n(43)),c=n(44),i=n(50),u=n(49),m=(n(52),n(51)),f=n(10),d=n(16),h=n(130),p=n(141),w=Object(h.a)((function(e){return{root:{"& > *":{width:"40ch"}}}}));var v=function(e){var t=w(),n=r.a.useState(""),a=Object(d.a)(n,2),l=a[0],o=a[1],s=e.index;return r.a.createElement("div",null,r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement("h4",null,e.title),r.a.createElement(p.a,{className:t.root,id:"inputBox"+s,label:"\u041c\u043e\u0439 \u043e\u0442\u0432\u0435\u0442",value:l,onChange:function(t){o(t.target.value),e.returnAnswer(t.target.value,s,t.target.value)}})))},E=n(142),g=n(143),b=n(136),y=n(137),A=Object(h.a)((function(e){return{formControl:{minWidth:120}}}));function O(e){var t=A(),n=r.a.useState(""),a=Object(d.a)(n,2),l=a[0],o=a[1],s=e.index,c=r.a.useState(!1),i=Object(d.a)(c,2),u=i[0],m=i[1];return r.a.createElement("div",null,r.a.createElement("h4",null,e.title),r.a.createElement(b.a,{className:t.formControl},r.a.createElement(E.a,{id:"controlled-open-select-label"},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c"),r.a.createElement(y.a,{labelId:"controlled-open-select-label",id:"select"+s,open:u,onClose:function(e){m(!1)},onOpen:function(e){m(!0)},value:l,onChange:function(t){o(t.target.value);var n=e.answers.indexOf(t.target.value);e.returnAnswer(t.target.value,s,n)}},r.a.createElement(g.a,{value:""},r.a.createElement("em",null,"None")),e.answers.map((function(e,t){return r.a.createElement(g.a,{key:t,value:e},e)})))))}var j=n(138),k=n(140),x=n(144);function S(e){var t=r.a.useState(""),n=Object(d.a)(t,2),a=n[0],l=n[1],o=e.index;return r.a.createElement("div",null,r.a.createElement("h4",null,e.title),r.a.createElement(b.a,{const:"fieldset"},r.a.createElement(k.a,{"aria-label":e.title,name:e.title,value:a,onChange:function(t){l(t.target.value);var n=e.answers.indexOf(t.target.value);e.returnAnswer(t.target.value,o,n)}},e.answers.map((function(e,t){return r.a.createElement(x.a,{key:t,value:e,control:r.a.createElement(j.a,null),label:e})})))))}var N=Object(h.a)((function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"auto"}}}));function _(e){var t=N(),n=r.a.useState(""),a=Object(d.a)(n,2),l=a[0],o=a[1],s=e.index;return r.a.createElement("div",null,r.a.createElement("h4",null,e.title),r.a.createElement("form",{className:t.container,noValidate:!0},r.a.createElement(p.a,{id:"time"+s,label:"\u0412\u0440\u0435\u043c\u044f",type:"time",value:l,onChange:function(t){o(t.target.value),e.returnAnswer(t.target.value,s,t.target.value)},className:t.textField,InputLabelProps:{shrink:!0},InputProps:{disableUnderline:!0}})))}var C=n(38);function q(e){var t=Object(a.useState)({}),n=Object(d.a)(t,2),l=n[0],o=n[1],s=Object(a.useState)({}),c=Object(d.a)(s,2),i=c[0],u=c[1],m=e.index,f={},h={},p=function(t){return function(n){(f=Object(C.a)({},l))[t]=n.target.value,o(f),h=Object(C.a)({},i);var a=e.answers.indexOf(n.target.value);h[t]=a,u(h),e.returnAnswer(f,m,h)}};return r.a.createElement("div",{className:"radioHorizontal"},r.a.createElement("h4",null,e.title),r.a.createElement("button",{onClick:function(){o({}),e.returnAnswer({},m)}},"clear"),r.a.createElement("div",{className:"question_item"},e.subquestion.map((function(t,n){return r.a.createElement("div",{className:"question_item_",key:n},r.a.createElement("p",null,t),r.a.createElement(b.a,{component:"fieldset",className:"question_item__answer"},r.a.createElement(k.a,{"aria-label":"position",name:"position",className:"question_item__answer_",value:l[n]?l[n]:"",onClick:p(n)},e.answers.map((function(e,t){return r.a.createElement(x.a,{key:t,value:e,control:r.a.createElement(j.a,{color:"primary"}),label:n>0?"":e,labelPlacement:"top"})})))))}))))}var D=n(60),R=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={questions:[],main_title:"",gateway:"",answers:{},shortAnswers:{},showAnswers:!1},e.downloadData=function(){var t=D.parse(window.location.search,{decode:!1});console.log(t),e.props.url?fetch(e.props.url).then((function(e){return console.log("RESPONSE",e),e.json()})).then((function(t){console.log("DATA",t),e.setState({questions:t.questions,main_title:t.main_title,gateway:t.gateway})})):console.log("ERROR: no url detected")},e.uploadData=function(t){fetch(e.state.gateway,{method:"POST",mode:"no-cors",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(t){console.log("Error",t),e.setState({showAnswers:!0})}))},e.returnAnswer=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=Object(C.a)({},e.state.answers);r[n]=t,e.setState({answers:r});var l=Object(C.a)({},e.state.shortAnswers);l[n]=a,e.setState({shortAnswers:l})},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.downloadData()}},{key:"render",value:function(){var e=this,t=this.state.questions.map((function(t,n){return"input"===t.type?r.a.createElement(v,{key:n,index:n,title:t.title,returnAnswer:e.returnAnswer}):"select"===t.type?r.a.createElement(O,{key:n,index:n,title:t.title,answers:t.answer,returnAnswer:e.returnAnswer}):"radio"===t.type?r.a.createElement(S,{key:n,index:n,title:t.title,answers:t.answer,returnAnswer:e.returnAnswer}):"time"===t.type?r.a.createElement(_,{key:n,index:n,title:t.title,returnAnswer:e.returnAnswer}):"multiradio"===t.type?r.a.createElement(q,{key:n,index:n,title:t.title,subquestion:t.subquestion,answers:t.answer,returnAnswer:e.returnAnswer}):null}));return r.a.createElement("div",null,r.a.createElement("h1",{className:"text-align-center"},this.state.main_title),t,r.a.createElement("div",{style:{paddingTop:20,paddingBottom:20,textAlign:"center"}},r.a.createElement("button",{onClick:function(){return e.uploadData({a:"HELLo"})}},"Send data"),this.state.showAnswers?r.a.createElement("p",{style:{textAlign:"left"}},"Full answers: ",JSON.stringify(this.state.answers)):null,this.state.showAnswers?r.a.createElement("p",{style:{textAlign:"left"}},"Short answers: ",JSON.stringify(this.state.shortAnswers)):null))}}]),n}(a.Component),T=n(60),L=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={forms:[],mainUrl:""},e.downloadData=function(){var t=T.parse(window.location.search,{decode:!1});console.log(t),t.url?fetch(t.url).then((function(e){return console.log("RESPONSE",e),e.json()})).then((function(n){console.log("DATA",n),e.setState({forms:n,mainUrl:t.url})})):console.log("ERROR: no url detected")},e.Home=function(){return r.a.createElement("h2",null,"Home")},e.FormA=function(){return r.a.createElement(R,{url:"https://raw.githubusercontent.com/aTNa-Lab/kloop-forms-config/master/form_A.json"})},e.FormB=function(){return r.a.createElement(R,{url:"https://raw.githubusercontent.com/aTNa-Lab/kloop-forms-config/master/form_B.json"})},e.FormC=function(){return r.a.createElement(R,{url:"https://raw.githubusercontent.com/aTNa-Lab/kloop-forms-config/master/form_C.json"})},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.downloadData()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(m.a,null,r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(m.b,{to:"/?url="+this.state.mainUrl},"Home")),this.state.forms.map((function(t,n){return r.a.createElement("li",null,r.a.createElement(m.b,{key:n,to:t.path+"?url="+e.state.mainUrl},t.label))})))),r.a.createElement(f.c,null,this.state.forms.map((function(t,n){return r.a.createElement(f.a,{key:n,path:t.path},(function(){return r.a.createElement(R,{url:t.url+"?url="+e.state.mainUrl})}))}))))))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},52:function(e,t,n){},77:function(e,t,n){e.exports=n(100)},82:function(e,t,n){}},[[77,1,2]]]);
//# sourceMappingURL=main.33cfaa40.chunk.js.map